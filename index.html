<!DOCTYPE html>
<html>
<head>
    <title>Tier 10 Progress Calculator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    
    <div class="tech-tree">
        <div class="apNode" class="tech-node">
            <label for="adv-prot-lvl">Advanced Protection Level</label>
            <div class="select-div">
                <select name="adv-prot-lvl" id="adv-prot-lvl">
                    <option value=0>0</option>
                    <option value=1>1</option>
                    <option value=2>2</option>
                    <option value=3>3</option>
                    <option value=4>4</option>
                    <option value=5>5</option>
                    <option value=6>6</option>
                    <option value=7>7</option>
                    <option value=8>8</option>
                    <option value=9>9</option>
                    <option value=10>10</option>
                </select>
            </div>
            <div id="advProtResult"></div>
        </div>
        <div class="hpNode" class="tech-node">
            <label for="healthLvl">Health Boost III Level</label>
            <div class="select-div">
                <select name="healthLvl" id="healthLvl">
                    <option value=0>0</option>
                    <option value=1>1</option>
                    <option value=2>2</option>
                    <option value=3>3</option>
                    <option value=4>4</option>
                    <option value=5>5</option>
                    <option value=6>6</option>
                    <option value=7>7</option>
                    <option value=8>8</option>
                    <option value=9>9</option>
                    <option value=10>10</option>
                </select>
            </div>
            <div id="healthBoostResultDiv"></div>
        </div>
        <div class="attNode" class="tech-node">
            <label for="attackLvl">Attack Boost III Level</label>
            <div class="select-div">
                <select name="attackLvl" id="attackLvl">
                    <option value=0>0</option>
                    <option value=1>1</option>
                    <option value=2>2</option>
                    <option value=3>3</option>
                    <option value=4>4</option>
                    <option value=5>5</option>
                    <option value=6>6</option>
                    <option value=7>7</option>
                    <option value=8>8</option>
                    <option value=9>9</option>
                    <option value=10>10</option>
                </select>
            </div>
            <div id="attackBoostResultDiv"></div>
        </div>
        <div class="defNode" class="tech-node">
            <label for="defenseLvl">Defense Boost III Level</label>
            <div class="select-div">
                <select name="defenseLvl" id="defenseLvl">
                    <option value=0>0</option>
                    <option value=1>1</option>
                    <option value=2>2</option>
                    <option value=3>3</option>
                    <option value=4>4</option>
                    <option value=5>5</option>
                    <option value=6>6</option>
                    <option value=7>7</option>
                    <option value=8>8</option>
                    <option value=9>9</option>
                    <option value=10>10</option>
                </select>
            </div>
            <div id="defenseBoostResultDiv"></div>
        </div>
    </div>

    <p>Total amount of gold still needed for tier 10 troop research</p>
    <div id="totalGoldRemainingDiv"></div>
    <br>
    <p>Total amount of valor still needed for tier 10 troop research</p>
    <div id="totalValorRemainingDiv"></div>



    <script>
        const advancedProtectionGold = [
            0,0,0,157000000,157000000,219000000,219000000,285000000,285000000,400000000
        ];

        const advancedProtectionValor = [
            1280,1440,1440,1600,1600,1800,1800,2000,2000,2000
        ];

        const boostThreeGold = [
            92300000,157000000,157000000,219000000,219000000,285000000,285000000,400000000,400000000,560000000
        ];

        const boostThreeValor = [
            1440,1600,1600,1800,1800,2000,2000,2200,2200,2400
        ];

        const tierTenGold = 530000000;
        const tierTenValor = 2400

        const advProtLvl = document.getElementById('adv-prot-lvl');
        const hLvl = document.getElementById('healthLvl');
        const aLvl = document.getElementById('attackLvl');
        const dLvl = document.getElementById('defenseLvl');
        let protVal = 0;
        let protGold = 0;
        let healthVal = 0;
        let healthGold = 0
        let attackVal = 0;
        let attackGold = 0;
        let defenseVal = 0;
        let defenseGold = 0;

        const protGoldResultDiv = document.getElementById('advProtResult');
        const healthGoldResultDiv = document.getElementById('healthBoostResultDiv');
        const attackGoldResultDiv = document.getElementById('attackBoostResultDiv');
        const defenseGoldResultDiv = document.getElementById('defenseBoostResultDiv');
        const totalGoldDiv = document.getElementById('totalGoldRemainingDiv');
        const totalValorDiv = document.getElementById('totalValorRemainingDiv');

        document.addEventListener('DOMContentLoaded', () => {
            protGold = sumRange(advancedProtectionGold, advProtLvl.value, advancedProtectionGold.length-1);
            protVal = sumRange(advancedProtectionValor, advProtLvl.value, advancedProtectionValor.length-1);
            protGoldResultDiv.textContent = protGold.toLocaleString();

            healthGold = sumRange(boostThreeGold, hLvl.value, boostThreeGold.length-1);
            healthVal = sumRange(boostThreeValor, hLvl.value, boostThreeValor.length-1);
            healthGoldResultDiv.textContent = healthGold.toLocaleString();

            attackGold = sumRange(boostThreeGold, aLvl.value, boostThreeGold.length-1);
            attackVal = sumRange(boostThreeValor, aLvl.value, boostThreeValor.length-1);
            attackGoldResultDiv.textContent = attackGold.toLocaleString();
            
            defenseGold = sumRange(boostThreeGold, dLvl.value, boostThreeGold.length-1);
            defenseVal = sumRange(boostThreeValor, dLvl.value, boostThreeValor.length-1);
            defenseGoldResultDiv.textContent = defenseGold.toLocaleString();

            let totalGoldNum = healthGold + protGold + attackGold + defenseGold + tierTenGold;
            totalGoldDiv.textContent = totalGoldNum.toLocaleString();
            let totalValorNum = healthVal + protVal + attackVal + defenseVal + tierTenValor;
            totalValorDiv.textContent = totalValorNum.toLocaleString();
        });

        advProtLvl.addEventListener('change', (event) => {
            protGold = sumRange(advancedProtectionGold, event.target.value, advancedProtectionGold.length-1);
            protVal = sumRange(advancedProtectionValor, event.target.value, advancedProtectionValor.length-1);
            protGoldResultDiv.textContent = protGold.toLocaleString();
            let totalGoldNum = healthGold + protGold + attackGold + defenseGold + tierTenGold;
            totalGoldDiv.textContent = totalGoldNum.toLocaleString();
            let totalValorNum = healthVal + protVal + attackVal + defenseVal + tierTenValor;
            totalValorDiv.textContent = totalValorNum.toLocaleString();
            console.log("Protection Gold: ", protGold);
            console.log("Protection Valor: ", protVal);
        });

        hLvl.addEventListener('change', (event) => {
            healthGold = sumRange(boostThreeGold, event.target.value, boostThreeGold.length-1);
            healthVal = sumRange(boostThreeValor, event.target.value, boostThreeValor.length-1);
            healthGoldResultDiv.textContent = healthGold.toLocaleString();
            let totalGoldNum = healthGold + protGold + attackGold + defenseGold + tierTenGold;
            totalGoldDiv.textContent = totalGoldNum.toLocaleString();
            let totalValorNum = healthVal + protVal + attackVal + defenseVal + tierTenValor;
            totalValorDiv.textContent = totalValorNum.toLocaleString();
            console.log("Health Gold: ", healthGold);
            console.log("Health Valor: ", healthGold);
        });

        aLvl.addEventListener('change', (event) => {
            attackGold = sumRange(boostThreeGold, event.target.value, boostThreeGold.length-1);
            attackVal = sumRange(boostThreeValor, event.target.value, boostThreeValor.length-1);
            attackGoldResultDiv.textContent = attackGold.toLocaleString();
            let totalGoldNum = healthGold + protGold + attackGold + defenseGold + tierTenGold;
            totalGoldDiv.textContent = totalGoldNum.toLocaleString();
            let totalValorNum = healthVal + protVal + attackVal + defenseVal + tierTenValor;
            totalValorDiv.textContent = totalValorNum.toLocaleString();
            console.log("Attack Gold: ", attackGold);
            console.log("Attack Valor: ", attackVal);
        });

        dLvl.addEventListener('change', (event) => {
            defenseGold = sumRange(boostThreeGold, event.target.value, boostThreeGold.length-1);
            defenseVal = sumRange(boostThreeValor, event.target.value, boostThreeValor.length-1);
            defenseGoldResultDiv.textContent = defenseGold.toLocaleString();
            let totalGoldNum = healthGold + protGold + attackGold + defenseGold + tierTenGold;
            totalGoldDiv.textContent = totalGoldNum.toLocaleString();
            let totalValorNum = healthVal + protVal + attackVal + defenseVal + tierTenValor;
            totalValorDiv.textContent = totalValorNum.toLocaleString();
            console.log("Defense Gold: ", defenseGold);
            console.log("Defense Valor: ", defenseVal);
        });


        

        function sumRange(arr, start, end) {
            if (start < 0 || end >= arr.length || start > end) {
                return 0; // Handle invalid input
            }

            let sum = 0;
            for (let i = start; i <= end; i++) {
                sum += arr[i];
            }
            return sum;
        }
    </script>
</body>
</html>